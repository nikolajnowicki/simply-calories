generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("POSTGRES_PRISMA_URL")
  directUrl = env("POSTGRES_URL_NON_POOLING")
}

model User {
  id              String            @id @default(cuid())
  username        String            @unique
  passwordHash    String
  name            String?
  email           String            @unique
  caloricGoal     Float?
  bmrResults      BMRResult[]
  fastingResults  FastingResult[]
  foodConsumption FoodConsumption[]
}

model BMRResult {
  id                        String   @id @default(cuid())
  user                      User     @relation(fields: [userId], references: [id])
  userId                    String
  height                    Float
  weight                    Float
  gender                    String
  activityLevel             String
  tdee                      Float
  deficitLevel10            Float
  deficitLevel20            Float
  deficitLevel30            Float
  calculatedValueCalories10 Float
  calculatedValueKilos10    Float
  calculatedValueCalories20 Float
  calculatedValueKilos20    Float
  calculatedValueCalories30 Float
  calculatedValueKilos30    Float
  createdAt                 DateTime @default(now())
}

model FastingResult {
  id              Int      @id @default(autoincrement())
  user            User     @relation(fields: [userId], references: [id])
  userId          String
  fastingDuration String
  createdAt       DateTime @default(now())
}

model FoodConsumption {
  id           String   @id @default(cuid())
  user         User     @relation(fields: [userId], references: [id])
  userId       String
  foodName     String
  amount       Float
  calories     Float
  dateConsumed DateTime @default(now())

  @@index([userId, dateConsumed])
}
